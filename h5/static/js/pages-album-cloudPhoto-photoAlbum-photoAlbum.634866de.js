(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-album-cloudPhoto-photoAlbum-photoAlbum"],{"128a":function(t,e,i){"use strict";i.r(e);var n=i("2dc3"),a=i("e84e");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("fece");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"274bd881",null,!1,n["a"],r);e["default"]=u.exports},"2dc3":function(t,e,i){"use strict";var n;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return 0==t.list.length?i("v-uni-view",{staticClass:"no-details"},[i("v-uni-image",{staticClass:"no-production",attrs:{src:"https://common.xxpie.com/noproduction.png"}})],1):i("v-uni-view",{staticClass:"list-masonry"},[t._l(t.list,(function(e,n){return i("v-uni-view",{staticClass:"item-masonry"},[i("v-uni-image",{attrs:{src:e.url_thumbnail,mode:"widthFix"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.imgCropper(e)}}})],1)})),i("cropper",{ref:"cropper",attrs:{selWidth:"750rpx",selHeight:"420rpx",imgCroppers:t.imgCroppers,avatarStyle:"width:100vw;height:100vw;"},on:{upload:function(e){arguments[0]=e=t.$handleEvent(e),t.myUpload.apply(void 0,arguments)}}})],2)},o=[]},"64ff":function(t,e,i){var n=i("a45b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("35df0b12",n,!0,{sourceMap:!1,shadowMode:!1})},a45b:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".list-masonry[data-v-274bd881]{padding:%?24?%;-webkit-column-count:2;column-count:2;-webkit-column-gap:%?14?%;column-gap:%?14?%}.item-masonry[data-v-274bd881]{-webkit-column-break-inside:avoid;break-inside:avoid;box-sizing:border-box}.item-masonry uni-image[data-v-274bd881]{width:100%}.no-details[data-v-274bd881]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:%?700?%}.no-production[data-v-274bd881]{width:%?300?%;height:%?400?%}",""]),t.exports=e},e84e:function(t,e,i){"use strict";i.r(e);var n=i("fc5b"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},fc5b:function(t,e,i){"use strict";var n=i("4ea4");i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("8d6e")),o={components:{cropper:a.default},data:function(){return{albumid:"",currentPage:1,pageSize:10,itemType:"PHOTO",queryState:!0,list:[],imgCroppers:""}},onLoad:function(t){this.albumid=t.albumid,this.queryImg(this.albumid)},methods:{imgCropper:function(t){var e=this;uni.downloadFile({url:t.url_origin,success:function(t){200===t.statusCode&&(e.imgCroppers=t.tempFilePath)}}),setTimeout((function(){e.screenshot()}),500)},queryImg:function(t){var e=this;this.$http.get("pm/queryAlbumItemsPg",{album_id:t,item_status:"NORMAL",item_retouch_status:"ALL",item_publish_status:"ALL",page_no:this.currentPage,page_size:this.pageSize,item_type:this.itemType}).then((function(t){e.imgcount=t.result.count,t.result.items.length>0?(e.list=e.list.concat(t.result.items),console.log(e.imgList),e.queryState=!0):e.queryState=!1})).catch((function(t){this.queryState=!1,console.log(t),uni.showToast({title:err.data&&err.data.errMsg||err.errMsg,icon:"none"})}))},screenshot:function(){this.$refs.cropper.ySelect()},myUpload:function(t){var e=this;this.$http.qnFileUpload([{path:t.path,typestate:1}],(function(t,i,n){e.coverAlbumBanner(t)})).then((function(e){var i=getCurrentPages(),n=(i[i.length-1],i[i.length-2]);n.$vm.imgurl=t.path,uni.navigateBack({delta:1})}))},coverAlbumBanner:function(t){this.$http.post("pm/setAlbumShareInfo",{album_id:this.albumid,album_type:"CLOUD_ALBUM",share_photo_key:t.key}).then((function(t){})).catch((function(t){console.log(t),uni.showToast({title:err.data&&err.data.errMsg||err.errMsg,icon:"none"})}))},onReachBottom:function(t){this.queryState&&this.queryImg(this.albumid)}}};e.default=o},fece:function(t,e,i){"use strict";var n=i("64ff"),a=i.n(n);a.a}}]);