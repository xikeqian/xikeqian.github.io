(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addLabels-addLabels"],{"0065":function(e,t,i){var a=i("6f7e");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("57c4c02a",a,!0,{sourceMap:!1,shadowMode:!1})},"19b3":function(e,t,i){"use strict";i("7db0"),i("4160"),i("45fc"),i("a434"),i("a9e3"),i("498a"),i("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={data:function(){return{currentLebals:[],lebalArr:[],diyValue:"",gallery_ossobject_ids:[],gallery_id:"",flag:!1,ossobject_ids:[],type:!1,fromAlbum:!1}},onLoad:function(e){e.name&&(this.fromAlbum=!0),this.gallery_id=e.gallery_id;var t=getApp().globalData.albumSelectedInfo;this.gallery_ossobject_ids=t.selected,this.currentLebals=t.tags||[],this.flag=t.isAllSelected,this.type=!!Number(e.type),this.getUserLabels()},methods:{lebalSelected:function(e){this.lebalArr.forEach((function(t){e.tag_def_id==t.tag_def_id&&(t.selected=!t.selected)}));var t=[];this.lebalArr.forEach((function(e){1==e.selected&&t.push(e)})),this.currentLebals=t,this.$forceUpdate()},getUserLabels:function(){var e=this;this.$http.get("cm/getUserGalleryTags",{type:"GALLERY",gallery_id:this.gallery_id}).then((function(t){e.lebalArr=t.result;for(var i=0;i<e.lebalArr.length;i++)for(var a=e.lebalArr[i],n=0;n<e.currentLebals.length;n++){var l=e.currentLebals[n];a.tag_def_id==l.tag_def_id&&(a.selected=!0)}})).catch((function(e){return uni.showToast({title:e.data.errMsg,icon:"none"})}))},lastPage:function(){uni.navigateBack({delta:1})},addUserTag:function(){var e=this;e.$http.post("cm/addUserTag",{name:e.diyValue,type:"GALLERY"}).then((function(t){t.result&&(e.$set(t.result,"selected",!0),e.currentLebals.push(t.result),e.lebalArr.push(t.result),e.diyValue="",e.type&&uni.navigateBack({delta:1}))})).catch((function(e){console.error(e)}))},addlebal2img:function(){if(this.fromAlbum)this.$http.post("cm/addUserTag",{name:this.diyValue,type:"GALLERY"}).then((function(e){console.log(e),0===e.code&&uni.showToast({title:"成功添加标签到图库"})})).catch((function(e){return uni.showToast({title:e.data.errMsg,icon:"none"})}));else{var e=[];if(this.currentLebals.forEach((function(t){e.push(t.tag_def_id)})),this.ossobject_ids=e,0===e.length)return this.diyValue?this.addUserTag():uni.showToast({title:"请先选择标签",icon:"none"});this.addLabelHandle()}},addLabelHandle:function(){var e={filter_condition:{file_name:"",filter_end_time:"",filter_start_time:"",gallery_id:this.gallery_id,object_type:"",order_by_mode:"upload_time",tag_def_ids:0,upload_by:""},is_selected_all:this.flag?1:0,platform:"WEB",reason:"SET_TAG",target_album_id:"",target_gallery_id:"",target_tag_def_ids:this.ossobject_ids,gallery_ossobject_ids:this.gallery_ossobject_ids};this.$http.post("cm/advancedOperateGalleryItems",e).then((function(e){console.log(e),uni.showToast({title:"添加标签成功",icon:"none"}),setTimeout((function(){uni.navigateBack({delta:1})}),500)})).catch((function(e){return uni.showToast({title:e.data.errMsg,icon:"none"})}))},addlebal:function(e){var t=this.lebals.find((function(t){return t.tag_def_id==e}));t.color="#FF4E28",t.back="rgba(255,243,240,1)",this.lebalArr.some((function(e){return e.tag_def_id==t.tag_def_id}))?uni.showToast({title:"标签已存在"}):this.lebalArr.push(t)},diy_lebal:function(e){var t=this,i=e.target.value.trim();i?(this.lebalArr.push({id:this.lebalArr.length,name:i,color:"#FF4E28",back:"rgba(255,243,240,1)"}),this.diyValue="",this.$http.get("cm/addUserTag",{name:i,type:"GALLERY"}).then((function(e){console.log(e),t.lebals.push(e.result)})).catch((function(e){return uni.showToast({title:e.data.errMsg,icon:"none"})}))):uni.showToast({title:"标签不能为空"})},deleteLabel:function(e){var t=this;this.lebalArr.forEach((function(t){t.tag_def_id==e.tag_def_id&&(t.selected=!1)})),this.currentLebals.forEach((function(i,a){i.tag_def_id==e.tag_def_id&&t.currentLebals.splice(a,1)})),this.$forceUpdate(),console.log(e)}}};t.default=a},"367d":function(e,t,i){"use strict";var a=i("0065"),n=i.n(a);n.a},"603b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABQUlEQVQ4T53UT06DQBQG8O9ZRvEA9gJ1gbGu9AQ0MbELjCd1ZU2alE3TlXUl3dkL1ANIHPQZBkrLMMM/dgzhx/fmvYE4uFoC7EImU3r9/EKPi+9HQ7jiBaCY+NFbg3ELQoSfxO+K8sPlBU6dEIwxCO+k9HOxyBc6oRoW4VtOKK2wD2rE5tudAruiNix1CrAtWodVwCa0CTOCNlTty6GbWQPm250+ZaWSjx9WGqW+pEbDilkTlhrlihDAdb62QSx9U7L9O9aEKlA6tI4TgjDORgERkvrht5ecYsJZALgBsMkTpEk/IJOJ7UQZQZXsGBtIX4G/RflWtAKaMHrOuslPo2ETWh5sQ7I9VjSqAT0cvRZYGzT7OXTAmlDqg9WiHHhvAO7UaAykr++ZfrT0e61Ra+LAW4FwhhM57YqVkv6JGRjxP75uExen+g+fAAAAAElFTkSuQmCC"},"6f7e":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".btnArea[data-v-5aeecd04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:space-around;justify-content:space-around}.fontStyle[data-v-5aeecd04]{font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;color:#666}.allTags[data-v-5aeecd04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?24?%;height:%?900?%}.main[data-v-5aeecd04]{width:%?750?%;\n\t/* height: 1335rpx; */background:#f2f2f2;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.nav[data-v-5aeecd04]{text-align:center;padding-top:%?60?%;height:%?120?%;font-size:%?34?%;color:#333;background-color:#fff;position:-webkit-sticky;position:sticky;top:0;left:0;z-index:1}.nav-return[data-v-5aeecd04]{float:left;margin-top:%?10?%;width:%?35?%;height:%?35?%}.lebelEdit[data-v-5aeecd04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:%?25?%;width:%?750?%;min-height:%?110?%;background:#fff;margin-bottom:%?20?%}.allLebals[data-v-5aeecd04]{height:%?1076?%;background:#fff}.singleTagsArea[data-v-5aeecd04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap}.currentTages[data-v-5aeecd04]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:-webkit-fit-content;width:fit-content;white-space:nowrap;padding:%?8?% %?20?%;background:#fff3f0;color:#ff4e28;height:%?56?%;margin-right:%?40?%}.currentTages uni-image[data-v-5aeecd04]{height:%?20?%;width:%?20?%}.singleLebal[data-v-5aeecd04]{width:-webkit-fit-content;width:fit-content;height:-webkit-fit-content;height:fit-content;color:#666;padding:%?8?% %?20?%;margin-bottom:%?30?%;margin-right:%?40?%;background:#f2f2f2;font-size:%?28?%;font-family:PingFangSC-Regular,PingFang SC;font-weight:400;text-align:center}.tagSelected[data-v-5aeecd04]{color:#ff4e28;background:#fff3f0}.btn[data-v-5aeecd04]{width:%?300?%;height:%?90?%;line-height:%?90?%;text-align:center;font-size:%?30?%;font-family:PingFangSC-Medium,PingFang SC;font-weight:500;background:#f2f2f2;border-radius:%?45?%}.confirmBtn[data-v-5aeecd04]{color:#fff;background:-webkit-linear-gradient(right,#fa4545,#ff6614);background:linear-gradient(270deg,#fa4545,#ff6614)}",""]),e.exports=t},a77a:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return l})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"main"},[a("v-uni-view",{staticClass:"lebelEdit"},[a("v-uni-view",{staticClass:"singleTagsArea"},[e._l(e.currentLebals,(function(t){return a("v-uni-view",{key:t.tag_def_id,staticClass:"currentTages"},[a("v-uni-view",{staticStyle:{"margin-right":"16rpx","line-height":"40rpx","margin-top":"6rpx"}},[e._v(e._s(t.name))]),a("v-uni-view",{staticStyle:{"line-height":"40rpx"}},[a("v-uni-image",{attrs:{src:i("603b"),mode:""},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.deleteLabel(t)}}})],1)],1)})),a("v-uni-input",{staticStyle:{width:"200rpx",height:"50rpx"},attrs:{placeholder:"新建标签","confirm-type":"done"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.addUserTag.apply(void 0,arguments)}},model:{value:e.diyValue,callback:function(t){e.diyValue=t},expression:"diyValue"}})],2)],1),a("v-uni-view",{staticClass:"allLebals"},[a("v-uni-view",{staticClass:"allTags"},[e.type?e._e():a("v-uni-view",{staticClass:"fontStyle"},[e._v("所有标签")]),e.type?e._e():a("v-uni-view",{staticClass:"singleTagsArea"},e._l(e.lebalArr,(function(t){return a("v-uni-view",{key:t.tag_def_id,class:{singleLebal:!0,tagSelected:t.selected},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.lebalSelected(t)}}},[e._v(e._s(t.name))])})),1)],1),a("v-uni-view",{staticClass:"btnArea"},[a("v-uni-view",{staticClass:"btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.lastPage.apply(void 0,arguments)}}},[e._v("取消")]),a("v-uni-view",{staticClass:"btn confirmBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addlebal2img.apply(void 0,arguments)}}},[e._v("保存")])],1)],1)],1)},l=[]},a788:function(e,t,i){"use strict";i.r(t);var a=i("19b3"),n=i.n(a);for(var l in a)"default"!==l&&function(e){i.d(t,e,(function(){return a[e]}))}(l);t["default"]=n.a},e5b6:function(e,t,i){"use strict";i.r(t);var a=i("a77a"),n=i("a788");for(var l in n)"default"!==l&&function(e){i.d(t,e,(function(){return n[e]}))}(l);i("367d");var r,o=i("f0c5"),s=Object(o["a"])(n["default"],a["b"],a["c"],!1,null,"5aeecd04",null,!1,a["a"],r);t["default"]=s.exports}}]);