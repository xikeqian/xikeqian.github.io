(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-album-by-label-album-by-label"],{"07ab":function(t,e,i){"use strict";i.r(e);var a=i("4d16"),o=i("72b7");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("21ed");var l,n=i("f0c5"),r=Object(n["a"])(o["default"],a["b"],a["c"],!1,null,"13f8e591",null,!1,a["a"],l);e["default"]=r.exports},1238:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".main[data-v-13f8e591]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.bottomTab[data-v-13f8e591]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:%?-2?%;width:%?750?%;height:%?96?%;background:hsla(0,0%,100%,.9);z-index:1}.nav[data-v-13f8e591]{height:%?88?%;padding:%?24?% %?12?%;font-size:%?34?%;color:#333;background-color:#fff;position:-webkit-sticky;position:sticky;top:0;left:0;z-index:1}.nav-return[data-v-13f8e591]{width:%?35?%;height:%?35?%;position:fixed;z-index:1}.bottomTab .items[data-v-13f8e591]{height:%?96?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.header[data-v-13f8e591]{width:%?750?%;height:%?88?%;background:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.header uni-image[data-v-13f8e591]{margin-top:%?24?%}.perInfo[data-v-13f8e591]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;width:%?750?%;height:%?156?%;background:#fff;padding:%?24?%;border-bottom:%?1?% solid #e5e5e5}.selectTitle[data-v-13f8e591]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:%?750?%;height:%?100?%;background:#fff;padding:%?30?% %?24?%}.photoArea[data-v-13f8e591]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:start;-webkit-justify-content:start;justify-content:start;width:%?750?%;height:%?960?%;-webkit-align-content:start;align-content:start}.photoArea .imgs[data-v-13f8e591]{width:%?183?%;height:%?183?%;margin-right:%?5?%;position:relative}.header_img[data-v-13f8e591]{width:%?40?%;height:%?40?%;margin:0 %?30?%}.items uni-image[data-v-13f8e591]{width:%?48?%;height:%?48?%}.photoArea uni-image[data-v-13f8e591]{width:%?183?%;height:%?183?%}.photoArea uni-video[data-v-13f8e591]{width:%?183?%;height:%?183?%}.labelPanel[data-v-13f8e591]{z-index:99;position:fixed;top:%?350?%;left:0;height:%?985?%;right:0;padding-left:%?300?%}.labelPanel .bg[data-v-13f8e591]{margin:auto;position:absolute;left:0;top:0;right:0;bottom:0;background-color:rgba(0,0,0,.6);z-index:-1}.labelPanel .labels[data-v-13f8e591]{width:100%;height:%?890?%;padding:%?40?%;background-color:#fff}.labelPanel uni-text[data-v-13f8e591]{display:inline-block;padding:%?8?% %?20?%;width:-webkit-fit-content;width:fit-content;height:-webkit-fit-content;height:fit-content;margin-bottom:%?32?%;margin-right:%?40?%}.labelPanel .btn[data-v-13f8e591]{border-top:%?1?% solid #ff4e28;height:%?100?%;text-align:center;color:#ff4e28;font-size:%?32?%;line-height:%?100?%;background-color:#fff}.photoArea .imgs .video-play[data-v-13f8e591]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:%?64?%;height:%?64?%}.nav .nav-text[data-v-13f8e591]{position:absolute;left:0;right:0;top:%?20?%;text-align:center;padding-left:%?80?%;padding-right:%?380?%;word-wrap:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.popup-body[data-v-13f8e591]{padding:%?32?%}",""]),t.exports=e},"21ed":function(t,e,i){"use strict";var a=i("b51e"),o=i.n(a);o.a},"4d16":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={"uni-popup":i("1c89").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"main"},[i("album-detail",{ref:"albumDetail",attrs:{sticky:!1,tagCreater:t.tagCreater,tag_def_id:t.tag_def_id,"gallery-id":t.gallery_id,params:t.params,"photo-info":t.photoInfo,titleTag:t.titleTag,jurisdiction:t.jurisdiction},on:{xgTag:function(e){arguments[0]=e=t.$handleEvent(e),t.xgTag.apply(void 0,arguments)}}}),i("uni-popup",{ref:"editTagPopup"},[i("v-uni-view",{staticClass:"m-popup"},[i("v-uni-view",{staticClass:"popup-head"},[t._v("编辑标签")]),i("v-uni-view",{staticClass:"popup-body"},[i("v-uni-input",{attrs:{type:"text",placeholder:"标签名称"},model:{value:t.editTagName,callback:function(e){t.editTagName=e},expression:"editTagName"}})],1),i("v-uni-view",{staticClass:"popup-foot"},[i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancelEditTag.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confEditTag.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1)],1)},s=[]},"72b7":function(t,e,i){"use strict";i.r(e);var a=i("9cba"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},"9cba":function(t,e,i){"use strict";var a=i("4ea4");i("a623"),i("4160"),i("a15b"),i("a9e3"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("325c"),s=a(i("e398")),l=a(i("1c89")),n=a(i("1e79")),r={components:{videoPlay:s.default,uniPopup:l.default,albumDetail:n.default},filters:{format:function(t){return o.dateUtils.format(t)}},data:function(){return{filtersrc:"../../static/albumsDetail/filter.png",empty_status:!1,mediaStatus:"PHOTO",mediaArr:[{id:1,title:"图片",color:"#FF4E28"},{id:2,title:"视频",color:"#333333"}],tabbars:[{id:1,src:"https://common.xxpie.com/blockAdd.png",title:"添加到"},{id:2,src:"https://common.xxpie.com/blackAIPhotoshop.png",title:"AI修图"},{id:3,src:"../../static/albumsDetail/share_1.png",title:"分享"},{id:4,src:"../../static/albumsDetail/label.png",title:"标签"},{id:5,src:"../../static/albumsDetail/more.png",title:"更多"}],status_1:1,selected_numbers:0,photos:[],videos:[],selectShow:!1,SelectionStatus:!1,selectionColor:"black",labelShow:!1,albumInfo:{},userInfo:{},page:1,tagsPage:1,gallery_id:"",userLabels:[],pageNo:1,pageSize:50,tag_def_ids:"",filter_start_time:"",filter_end_time:"",galleryTime:"",tagName:"",editTagName:"",tag_def_id:"",params:{},tagCreater:"",photoInfo:{showType:"tag"},titleTag:"",jurisdiction:!0}},onLoad:function(t){this.currentUserId=getApp().globalData.userInfo.sys_user_id,this.gallery_id=t.gallery_id,this.tagName=t.tag,this.tagCreater=t.userid,uni.setNavigationBarTitle({title:t.tag}),this.titleTag=t.tag,this.tag_def_ids=JSON.stringify([t.tagId]),this.tag_def_id=t.tagId,this.params={tag_def_ids:'["'.concat(t.tagId,'"]')},this.jurisdiction=Boolean(Number(t.jurisdiction)),this.queryGalleryItems()},methods:{share:function(){uni.share({provider:"weixin",scene:"WXSceneSession",type:1,summary:this.tagName,success:function(t){}})},closeLabelPanel:function(){this.labelShow=!1},labelFilter:function(t){this.userLabels.forEach((function(e){e.tag_def_id==t.tag_def_id&&(e.bac="rgba(242,242,242,1)"==e.bac?"rgba(255,243,240,1)":"rgba(242,242,242,1)")}))},reachBottom:function(){this.queryGalleryItems()},imgPreview:function(t){uni.previewImage({urls:[t]})},icon_choose:function(t){switch(t){case"标签":if("PHOTO"==this.mediaStatus){var e=[];this.photos.forEach((function(t){"../../static/albumsDetail/selected.png"==t.src_1&&e.push(t.gallery_ossobject_id)})),uni.navigateTo({url:"../addLabels/addLabels?gallery_id="+this.gallery_id+"&gallery_ossobject_ids="+e.join(",")})}break;case"更多":uni.showActionSheet({itemList:["移动至","下载","收藏","删除"],success:function(t){console.log(t)},fail:function(t){console.log(t)}})}},m2allAlbums:function(){uni.navigateTo({url:"../allAlbums/allAlbums"})},mediaSelect:function(t){"图片"==t.currentTarget.dataset.title?this.mediaStatus="PHOTO":"视频"==t.currentTarget.dataset.title&&(this.mediaStatus="VIDEO",0==this.mediaArr[1].length&&(this.empty_status=!0)),this.mediaArr.forEach((function(e){e.title==t.currentTarget.dataset.title?e.color="#FF4E28":e.color="#333333"})),this.pageNo=1,this.queryGalleryItems()},lastPage:function(){uni.navigateBack({delta:1})},showSelection:function(){this.filtersrc="../../static/albumsDetail/filter.png"==this.filtersrc?"../../static/albumsDetail/filter_1.png":"../../static/albumsDetail/filter.png",this.SelectionStatus=!this.SelectionStatus,this.selectionColor="black"==this.selectionColor?"#FF4E28":"black",this.labelShow=!this.labelShow},photoSelect:function(){this.photos.forEach((function(t){t.src_1=t.src_1="../../static/albumsDetail/waitphoto.png"})),this.selectShow=!0,this.status_1=2,this.selected_numbers=0},videoSelect:function(){this.videos.forEach((function(t){t.src_1=t.src_1="../../static/albumsDetail/waitphoto.png"})),this.selectShow=!0,this.status_1=2,this.selected_numbers=0},cancleSelect:function(){this.photos.forEach((function(t){t.src_1=t.src_1="../../static/albumsDetail/waitphoto.png"})),this.selectShow=!1,this.status_1=1,this.selected_numbers=0},queryGalleryItems:function(){var t=this;this.$http.get("cm/queryGalleryItemsPg",{page_no:this.pageNo,page_size:this.pageSize,filter_start_time:this.filter_start_time,filter_end_time:this.filter_end_time,gallery_id:this.gallery_id,order_by_mode:"upload_time",object_type:this.mediaStatus,tag_def_ids:this.tag_def_ids}).then((function(e){1===t.pageNo&&(t.photos=[],t.videos=[]),e.result.gallery_items.forEach((function(e){"PHOTO"==e.object_type?t.photos.push(e):t.videos.push(e)})),t.mediaArr[0].length=e.result.photo_count,t.mediaArr[1].length=e.result.video_count,++t.pageNo})).catch((function(t){return console.error(t),uni.showToast({title:t.data.errMsg,icon:"none"})}))},confirmLebals:function(){var t=[];this.userLabels.forEach((function(e){"rgba(255,243,240,1)"==e.bac&&t.push(e.tag_def_id)})),0==t.length?this.labelShow=!1:(this.pageNo=1,this.tag_def_ids=JSON.stringify(t),this.queryGalleryItems(),this.tagsPage=1,this.labelShow=!1,this.selectionColor="black",this.filtersrc="../../static/albumsDetail/filter.png")},selected:function(t){var e=0;"all"==t?"PHOTO"==this.mediaStatus?this.photos.every((function(t){return"../../static/albumsDetail/selected.png"==t.src_1}))?(this.photos.forEach((function(t){t.src_1="../../static/albumsDetail/waitphoto.png"})),e=0):this.photos.forEach((function(t){t.src_1="../../static/albumsDetail/selected.png","../../static/albumsDetail/selected.png"==t.src_1&&e++})):"VIDEO"==this.mediaStatus&&(this.videos.every((function(t){return"../../static/albumsDetail/selected.png"==t.src_1}))?(this.videos.forEach((function(t){t.src_1="../../static/albumsDetail/waitphoto.png"})),e=0):this.videos.forEach((function(t){t.src_1="../../static/albumsDetail/selected.png","../../static/albumsDetail/selected.png"==t.src_1&&e++}))):"PHOTO"==this.mediaStatus?this.photos.forEach((function(i){i.gallery_ossobject_id==t&&(i.src_1="../../static/albumsDetail/selected.png"==i.src_1?"../../static/albumsDetail/waitphoto.png":"../../static/albumsDetail/selected.png"),"../../static/albumsDetail/selected.png"==i.src_1&&e++})):"VIDEO"==this.mediaStatus&&this.videos.forEach((function(i){i.gallery_ossobject_id==t&&(i.src_1="../../static/albumsDetail/selected.png"==i.src_1?"../../static/albumsDetail/waitphoto.png":"../../static/albumsDetail/selected.png"),"../../static/albumsDetail/selected.png"==i.src_1&&e++})),this.selected_numbers=e},seeVideo:function(t){console.log(t),this.$refs.videoPlay.init(t)},xgTag:function(t){uni.setNavigationBarTitle({title:t}),this.titleTag=t}}};e.default=r},a623:function(t,e,i){"use strict";var a=i("23e7"),o=i("b727").every,s=i("a640"),l=i("ae40"),n=s("every"),r=l("every");a({target:"Array",proto:!0,forced:!n||!r},{every:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},b51e:function(t,e,i){var a=i("1238");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("72ad57ad",a,!0,{sourceMap:!1,shadowMode:!1})}}]);